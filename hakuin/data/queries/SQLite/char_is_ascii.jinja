{% set column = ctx.column | sql_escape if ctx.column else 'name' %}

SELECT  {{ column | sql_char_at(ctx.buffer | length) | sql_is_ascii }}


{% if ctx.table is none %}
FROM    sqlite_master
WHERE   type='table'
{% elif ctx.column is none %}
FROM    pragma_table_info({{ ctx.table | sql_hex_str }})
{% else %}
FROM    {{ ctx.table | sql_escape }}
{% endif %}

LIMIT   1
OFFSET  {{ ctx.row_idx }}